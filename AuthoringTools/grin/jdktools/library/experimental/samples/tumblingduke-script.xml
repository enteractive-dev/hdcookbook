<?xml version="1.0" encoding="UTF-8" standalone="yes"?>

<!-- 
    This is a GRIN show document expressed in Show XML syntax.

    This document was generated by GRIN to text to XML converter
    tool from tumblingduke.txt and then hand-edited to include
    JavaScript code and related changes.

    This XML document can be converted to GRIN binary format by
    hdcookbook converter tool. The main class of the tool is
    "com.hdcookbook.grin.io.xml.Main".
-->
<show draw-targets="T:Default" xmlns="http://grin.hdcookbook.com/io/xml">

    <!-- 
       runat="build" scripts are evaluated during build.
       In this example, we evaulate JavaScript code at build
       to fill "image" sub-elements of image-sequence elements
       in our show graph.
    -->
    <script runat="build" type="text/javascript">
       <!-- 
           This script generates "img" elements for
           image-sequence elements 
       -->
       <![CDATA[
        // import the java package referred in code
        importPackage(com.hdcookbook.grin.io.xml);

        // "show" is built-in global object representing 
        // the current show document. Get the feature list
        // from show object.
        var featureList = show.features.featureChoiceGroup;

        // iterate the feature (Java) list
        var itr = featureList.iterator();
        while (itr.hasNext()) {
            var f = itr.next();

            // filter feature by known image-sequence
            // ids. See below for specific image-sequence
            // elements
            if (f.id == "F:TumblingDuke1" ||
                f.id == "F:TumblingDuke2" ||
                f.id == "F:TumblingDuke3" ||
                f.id == "F:TumblingDuke4" ||
                f.id == "F:TumblingDuke5" ||
                f.id == "F:TumblingDuke6") {

               var images = f.images.img;  

               // we want 1,1,1,2,2,2....,17,17,17
               for (var v = 1; v < 17; v++) {
                   for (var i = 0; i <  3; i++) {            
                     var im = new ImageSequenceType.Images.Img();
                     im.src = "images/T" + v + ".gif";
                     images.add(im);
                   }
               }
            }
        }
      ]]>
    </script>
    <features>
        <group export="true" id="F:Everything">
            <part ref="F:TumblingDuke1"/>
            <part ref="F:TumblingDuke2"/>
            <part ref="F:TumblingDuke3"/>
            <part ref="F:TumblingDuke4"/>
            <part ref="F:TumblingDuke5"/>
            <part ref="F:TumblingDuke6"/>
            <part ref="F:Background"/>
        </group>
        <box y="50" x="200" height="251" width="1451" fill-color="#ffffffff" export="true" id="F:Background"/>
        <image-sequence y="60" x="1200" export="true" id="F:TumblingDuke1">
            <!-- images filled by script above -->
            <images/>
            <end-commands>
                <segment-done/>
            </end-commands>
        </image-sequence>
        <image-sequence y="60" x="1020" export="true" id="F:TumblingDuke2">
            <!-- images filled by script above -->
            <images/>
            <end-commands>
                <segment-done/>
            </end-commands>
        </image-sequence>
        <image-sequence y="60" x="840" export="true" id="F:TumblingDuke3">
            <!-- images filled by script above -->
            <images/>
            <end-commands>
                <segment-done/>
            </end-commands>
        </image-sequence>
        <image-sequence y="60" x="660" export="true" id="F:TumblingDuke4">
            <!-- images filled by script above -->
            <images/>
            <end-commands>
                <segment-done/>
            </end-commands>
        </image-sequence>
        <image-sequence y="60" x="480" export="true" id="F:TumblingDuke5">
            <!-- images filled by script above -->
            <images/>
            <end-commands>
                <segment-done/>
            </end-commands>
        </image-sequence>
        <image-sequence y="60" x="300" export="true" id="F:TumblingDuke6">
            <!-- images filled by script above -->
            <images/>
            <end-commands>
                <segment-done/>
            </end-commands>
        </image-sequence>
    </features>
    <rc-handlers/>
    <segments>
        <segment export="true" id="S:Initialize">
            <setup>
                <feature ref="F:Everything"/>
            </setup>
            <setup-done>
                <activate-segment segment="S:1"/>
            </setup-done>
        </segment>
        <segment export="true" id="S:1">
            <active>
                <feature ref="F:Background"/>
                <feature ref="F:TumblingDuke1"/>
            </active>
            <setup>
                <feature ref="F:Everything"/>
            </setup>
            <next>
                <activate-segment segment="S:2"/>
            </next>
        </segment>
        <segment export="true" id="S:2">
            <active>
                <feature ref="F:Background"/>
                <feature ref="F:TumblingDuke2"/>
            </active>
            <setup>
                <feature ref="F:Everything"/>
            </setup>
            <next>
                <activate-segment segment="S:3"/>
            </next>
        </segment>
        <segment export="true" id="S:3">
            <active>
                <feature ref="F:Background"/>
                <feature ref="F:TumblingDuke3"/>
            </active>
            <setup>
                <feature ref="F:Everything"/>
            </setup>
            <next>
                <activate-segment segment="S:4"/>
            </next>
        </segment>
        <segment export="true" id="S:4">
            <active>
                <feature ref="F:Background"/>
                <feature ref="F:TumblingDuke4"/>
            </active>
            <setup>
                <feature ref="F:Everything"/>
            </setup>
            <next>
                <activate-segment segment="S:5"/>
            </next>
        </segment>
        <segment export="true" id="S:5">
            <active>
                <feature ref="F:Background"/>
                <feature ref="F:TumblingDuke5"/>
            </active>
            <setup>
                <feature ref="F:Everything"/>
            </setup>
            <next>
                <activate-segment segment="S:6"/>
            </next>
        </segment>
        <segment export="true" id="S:6">
            <active>
                <feature ref="F:Background"/>
                <feature ref="F:TumblingDuke6"/>
            </active>
            <setup>
                <feature ref="F:Everything"/>
            </setup>
            <next>
                <activate-segment segment="S:1"/>
            </next>
        </segment>
    </segments>
</show>
